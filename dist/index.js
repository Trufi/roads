/*! For license information please see index.js.LICENSE.txt */
(()=>{var e={8518:function(e,t){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.applyDefaults=void 0,t.applyDefaults=function(e,t){var n=r({},t);for(var o in e)void 0!==e[o]&&(n[o]=e[o]);return n}},9753:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clamp=void 0,t.clamp=function(e,t,r){return e=Math.max(e,t),Math.min(e,r)}},7134:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventEmitter=void 0;var r=function(){function e(){this.events={}}return e.prototype.on=function(e,t){var r=this.events[e];return r||(r=this.events[e]=[]),r.push(t),this},e.prototype.once=function(e,t){var r=this,n=function(o){r.off(e,n),t.call(r,o)};return this.on(e,n),this},e.prototype.off=function(e,t){var r=this.events[e];if(!r)return this;var n=r.indexOf(t);return-1!==n&&r.splice(n,1),this},e.prototype.emit=function(e,t){var r=this.events[e];if(!r)return this;for(var n=r.slice(),o=0;o<n.length;o++)n[o].call(this,t);return this},e}();t.EventEmitter=r},1380:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.nearestPointOnSegment=void 0,t.nearestPointOnSegment=function(e,t,r){var n=e[0]-t[0],o=e[1]-t[1],i=r[0]-t[0],a=r[1]-t[1],s=i*i+a*a,c=0!==s?(n*i+o*a)/s:0;return c<0?{point:t,t:0}:c>1?{point:r,t:1}:{point:[Math.round(t[0]+c*i),Math.round(t[1]+c*a)],t:c}}},740:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrayShuffle=t.arrayInsert=void 0;var n=r(950);Object.defineProperty(t,"arrayInsert",{enumerable:!0,get:function(){return n.arrayInsert}});var o=r(9046);Object.defineProperty(t,"arrayShuffle",{enumerable:!0,get:function(){return o.arrayShuffle}})},950:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrayInsert=void 0,t.arrayInsert=function(e,t,r){var n=e.slice(0,t),o=e.slice(t);return n.push(r),n.concat(o)}},9046:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrayShuffle=void 0,t.arrayShuffle=function(e,t){void 0===t&&(t=Math.random);for(var r=e.slice(),n=0;n<r.length;n++){var o=n+Math.floor(t()*(r.length-n)),i=r[n];r[n]=r[o],r[o]=i}return r}},1535:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.affineStep=void 0;var n=r(9935);t.affineStep=function(e,t,r){return n.clamp((r-e)/(t-e),0,1)}},590:function(e,t){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.applyDefaults=void 0,t.applyDefaults=function(e,t){var n=r({},t);for(var o in e)void 0!==e[o]&&(n[o]=e[o]);return n}},7279:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.circleIcon=void 0,t.circleIcon=function(e,t,r,n){return void 0===r&&(r="#000"),void 0===n&&(n=0),"data:image/svg+xml;base64,"+btoa('<svg xmlns="http://www.w3.org/2000/svg" width="'+2*t+'" height="'+2*t+'" viewBox="0 0 '+2*t+" "+2*t+'">\n        <circle fill="'+e+'" cx="'+t+'" cy="'+t+'" r="'+t+'"/>\n        <circle fill="'+r+'" cx="'+t+'" cy="'+t+'" r="'+n+'"/>\n    </svg>')}},9935:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clamp=void 0,t.clamp=function(e,t,r){return e=Math.max(e,t),Math.min(e,r)}},7996:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.degToRad=void 0,t.degToRad=function(e){return e*Math.PI/180}},4474:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventEmitter=void 0;var r=function(){function e(){this.events={}}return e.prototype.on=function(e,t){var r=this.events[e];return r||(r=this.events[e]=[]),r.push(t),this},e.prototype.once=function(e,t){var r=this,n=function(o){r.off(e,n),t.call(r,o)};return this.on(e,n),this},e.prototype.off=function(e,t){var r=this.events[e];if(!r)return this;var n=r.indexOf(t);return-1!==n&&r.splice(n,1),this},e.prototype.emit=function(e,t){var r=this.events[e];if(!r)return this;for(var n=r.slice(),o=0;o<n.length;o++)n[o].call(this,t);return this},e}();t.EventEmitter=r},9875:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mod=t.throttle=t.sign=t.round=t.radToDeg=t.pick=t.nearestPointOnSegment=t.lerp=t.EventEmitter=t.degToRad=t.clamp=t.circleIcon=t.applyDefaults=t.affineStep=void 0;var n=r(1535);Object.defineProperty(t,"affineStep",{enumerable:!0,get:function(){return n.affineStep}});var o=r(590);Object.defineProperty(t,"applyDefaults",{enumerable:!0,get:function(){return o.applyDefaults}});var i=r(7279);Object.defineProperty(t,"circleIcon",{enumerable:!0,get:function(){return i.circleIcon}});var a=r(9935);Object.defineProperty(t,"clamp",{enumerable:!0,get:function(){return a.clamp}});var s=r(7996);Object.defineProperty(t,"degToRad",{enumerable:!0,get:function(){return s.degToRad}});var c=r(4474);Object.defineProperty(t,"EventEmitter",{enumerable:!0,get:function(){return c.EventEmitter}});var u=r(6253);Object.defineProperty(t,"lerp",{enumerable:!0,get:function(){return u.lerp}});var d=r(1883);Object.defineProperty(t,"nearestPointOnSegment",{enumerable:!0,get:function(){return d.nearestPointOnSegment}});var l=r(1758);Object.defineProperty(t,"pick",{enumerable:!0,get:function(){return l.pick}});var f=r(7461);Object.defineProperty(t,"radToDeg",{enumerable:!0,get:function(){return f.radToDeg}});var p=r(1152);Object.defineProperty(t,"round",{enumerable:!0,get:function(){return p.round}});var v=r(4290);Object.defineProperty(t,"sign",{enumerable:!0,get:function(){return v.sign}});var h=r(1702);Object.defineProperty(t,"throttle",{enumerable:!0,get:function(){return h.throttle}});var m=r(3590);Object.defineProperty(t,"mod",{enumerable:!0,get:function(){return m.mod}})},6253:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lerp=void 0,t.lerp=function(e,t,r){return e+r*(t-e)}},3590:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mod=void 0,t.mod=function(e,t){return e-t*Math.floor(e/t)}},1883:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.nearestPointOnSegment=void 0,t.nearestPointOnSegment=function(e,t,r){var n=e[0]-t[0],o=e[1]-t[1],i=r[0]-t[0],a=r[1]-t[1],s=i*i+a*a,c=0!==s?(n*i+o*a)/s:0;return c<0?{point:t,t:0}:c>1?{point:r,t:1}:{point:[Math.round(t[0]+c*i),Math.round(t[1]+c*a)],t:c}}},1758:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pick=void 0,t.pick=function(e,t){for(var r={},n=0;n<t.length;n++)r[t[n]]=e[t[n]];return r}},7461:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.radToDeg=void 0,t.radToDeg=function(e){return e/Math.PI*180}},1152:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.round=void 0,t.round=function(e,t){void 0===t&&(t=0);var r=Math.pow(10,t);return Math.round(e*r)/r}},4290:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sign=void 0,t.sign=function(e){return 0==(e=+e)||Number.isNaN(e)?e:e>0?1:-1}},1702:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.throttle=void 0,t.throttle=function(e,t,r){var n,o=!1;function i(){o=!1,n&&(a.apply(r,n),n=void 0)}function a(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];o?n=a:(e.apply(r,a),setTimeout(i,t),o=!0)}return a}},5545:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.coordinatesPrecision=void 0,t.coordinatesPrecision=function(e){return Math.ceil((e*Math.LN2+Math.log(256/360/.5))/Math.LN10)}},4001:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.geoDistance=void 0,t.geoDistance=function(e,t){var r=Math.PI/180,n=e[1]*r,o=t[1]*r,i=Math.sin((t[1]-e[1])*r/2),a=Math.sin((t[0]-e[0])*r/2),s=i*i+Math.cos(n)*Math.cos(o)*a*a,c=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return Math.round(6371e3*c)}},943:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.coordinatesPrecision=t.geoDistance=void 0;var n=r(4001);Object.defineProperty(t,"geoDistance",{enumerable:!0,get:function(){return n.geoDistance}});var o=r(5545);Object.defineProperty(t,"coordinatesPrecision",{enumerable:!0,get:function(){return o.coordinatesPrecision}})},7723:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(740),t),o(r(9875),t),o(r(943),t),o(r(3367),t),o(r(8999),t),o(r(4060),t),o(r(5610),t),o(r(7495),t),o(r(2083),t),o(r(8123),t)},7617:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapEvery=void 0,t.mapEvery=function(e,t){for(var r=e.entries(),n=r.next();!n.done;){var o=n.value,i=o[0];if(!t(o[1],i))return!1;n=r.next()}return!0}},1364:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapFilter=void 0,t.mapFilter=function(e,t){var r=[];return e.forEach((function(e,n){t(e,n)&&r.push(e)})),r}},1775:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapFind=void 0,t.mapFind=function(e,t){for(var r=e.entries(),n=r.next();!n.done;){var o=n.value,i=o[0],a=o[1];if(t(a,i))return a;n=r.next()}}},3367:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapEvery=t.mapSome=t.mapFilter=t.mapMap=t.mapFind=void 0;var n=r(1775);Object.defineProperty(t,"mapFind",{enumerable:!0,get:function(){return n.mapFind}});var o=r(5340);Object.defineProperty(t,"mapMap",{enumerable:!0,get:function(){return o.mapMap}});var i=r(1364);Object.defineProperty(t,"mapFilter",{enumerable:!0,get:function(){return i.mapFilter}});var a=r(3735);Object.defineProperty(t,"mapSome",{enumerable:!0,get:function(){return a.mapSome}});var s=r(7617);Object.defineProperty(t,"mapEvery",{enumerable:!0,get:function(){return s.mapEvery}})},5340:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapMap=void 0,t.mapMap=function(e,t){var r=[];return e.forEach((function(e,n){return r.push(t(e,n))})),r}},3735:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapSome=void 0,t.mapSome=function(e,t){for(var r=e.entries(),n=r.next();!n.done;){var o=n.value,i=o[0];if(t(o[1],i))return!0;n=r.next()}return!1}},3131:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.worldSize=void 0,t.worldSize=Math.pow(2,32)},8523:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapPointFromLngLat=void 0;var n=r(3131),o=r(9935),i=r(7996);t.mapPointFromLngLat=function(e){var t=Math.sin(i.degToRad(e[1])),r=e[0]*n.worldSize/360,a=Math.log((1+t)/(1-t))*n.worldSize/(4*Math.PI),s=n.worldSize/2;return[o.clamp(r,-s,s),o.clamp(a,-s,s)]}},8999:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapPointToLngLat=t.mapPointFromLngLat=void 0;var n=r(8523);Object.defineProperty(t,"mapPointFromLngLat",{enumerable:!0,get:function(){return n.mapPointFromLngLat}});var o=r(4175);Object.defineProperty(t,"mapPointToLngLat",{enumerable:!0,get:function(){return o.mapPointToLngLat}})},4175:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapPointToLngLat=void 0;var n=r(3131),o=r(7461);t.mapPointToLngLat=function(e){var t=-2*Math.PI/n.worldSize;return[360*e[0]/n.worldSize,90-2*o.radToDeg(Math.atan(Math.exp(e[1]*t)))]}},9645:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRandomFunction=void 0,t.createRandomFunction=function(e){return function(){return((e=16807*e%2147483647)-1)/2147483646}}},4060:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomSeed=t.createRandomFunction=void 0;var n=r(9645);Object.defineProperty(t,"createRandomFunction",{enumerable:!0,get:function(){return n.createRandomFunction}});var o=r(9597);Object.defineProperty(t,"randomSeed",{enumerable:!0,get:function(){return o.randomSeed}})},9597:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomSeed=void 0,t.randomSeed=function(){return Math.round(2147483647*Math.random())}},5610:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.percentile=t.p90=t.p75=t.p25=t.median=void 0;var n=r(3645);Object.defineProperty(t,"median",{enumerable:!0,get:function(){return n.median}});var o=r(4523);Object.defineProperty(t,"p25",{enumerable:!0,get:function(){return o.p25}});var i=r(9241);Object.defineProperty(t,"p75",{enumerable:!0,get:function(){return i.p75}});var a=r(699);Object.defineProperty(t,"p90",{enumerable:!0,get:function(){return a.p90}});var s=r(193);Object.defineProperty(t,"percentile",{enumerable:!0,get:function(){return s.percentile}})},3645:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.median=void 0;var n=r(193);t.median=function(e){return n.percentile(e,.5)}},4523:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.p25=void 0;var n=r(193);t.p25=function(e){return n.percentile(e,.25)}},9241:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.p75=void 0;var n=r(193);t.p75=function(e){return n.percentile(e,.75)}},699:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.p90=void 0;var n=r(193);t.p90=function(e){return n.percentile(e,.9)}},193:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.percentile=void 0,t.percentile=function(e,t){var r=e.slice();return r.sort((function(e,t){return e-t})),r[Math.floor(r.length*t)]}},7775:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vec2angle=void 0,t.vec2angle=function(e){return Math.atan2(e[1],e[0])}},4853:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vec2copy=void 0,t.vec2copy=function(e,t){e[0]=t[0],e[1]=t[1]}},4852:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vec2create=void 0,t.vec2create=function(){return[0,0]}},1624:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vec2cross=void 0,t.vec2cross=function(e,t,r){var n=t[0]*r[1]-t[1]*r[0];e[0]=e[1]=0,e[2]=n}},495:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vec2dist=void 0,t.vec2dist=function(e,t){var r=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(r*r+n*n)}},7428:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vec2dot=void 0,t.vec2dot=function(e,t){return e[0]*t[0]+e[1]*t[1]}},6998:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vec2equals=void 0,t.vec2equals=function(e,t,r){return void 0===r&&(r=1e-6),Math.abs(e[0]-t[0])<=r&&Math.abs(e[1]-t[1])<=r}},506:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vec2exactEquals=void 0,t.vec2exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]}},7495:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vec2set=t.vec2rotate=t.vec2normalize=t.vec2max=t.vec2min=t.vec2lerp=t.vec2length=t.vec2exactEquals=t.vec2equals=t.vec2dot=t.vec2dist=t.vec2cross=t.vec2create=t.vec2copy=t.vec2angle=void 0;var n=r(7775);Object.defineProperty(t,"vec2angle",{enumerable:!0,get:function(){return n.vec2angle}});var o=r(4853);Object.defineProperty(t,"vec2copy",{enumerable:!0,get:function(){return o.vec2copy}});var i=r(4852);Object.defineProperty(t,"vec2create",{enumerable:!0,get:function(){return i.vec2create}});var a=r(1624);Object.defineProperty(t,"vec2cross",{enumerable:!0,get:function(){return a.vec2cross}});var s=r(495);Object.defineProperty(t,"vec2dist",{enumerable:!0,get:function(){return s.vec2dist}});var c=r(7428);Object.defineProperty(t,"vec2dot",{enumerable:!0,get:function(){return c.vec2dot}});var u=r(6998);Object.defineProperty(t,"vec2equals",{enumerable:!0,get:function(){return u.vec2equals}});var d=r(506);Object.defineProperty(t,"vec2exactEquals",{enumerable:!0,get:function(){return d.vec2exactEquals}});var l=r(581);Object.defineProperty(t,"vec2length",{enumerable:!0,get:function(){return l.vec2length}});var f=r(2862);Object.defineProperty(t,"vec2lerp",{enumerable:!0,get:function(){return f.vec2lerp}});var p=r(2608);Object.defineProperty(t,"vec2min",{enumerable:!0,get:function(){return p.vec2min}});var v=r(2090);Object.defineProperty(t,"vec2max",{enumerable:!0,get:function(){return v.vec2max}});var h=r(5873);Object.defineProperty(t,"vec2normalize",{enumerable:!0,get:function(){return h.vec2normalize}});var m=r(2020);Object.defineProperty(t,"vec2rotate",{enumerable:!0,get:function(){return m.vec2rotate}});var g=r(3883);Object.defineProperty(t,"vec2set",{enumerable:!0,get:function(){return g.vec2set}})},581:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vec2length=void 0,t.vec2length=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}},2862:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vec2lerp=void 0,t.vec2lerp=function(e,t,r,n){var o=t[0],i=t[1];e[0]=o+n*(r[0]-o),e[1]=i+n*(r[1]-i)}},2090:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vec2max=void 0,t.vec2max=function(e,t,r){e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1])}},2608:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vec2min=void 0,t.vec2min=function(e,t,r){e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1])}},5873:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vec2normalize=void 0,t.vec2normalize=function(e,t){var r=t[0],n=t[1],o=r*r+n*n;o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o)}},2020:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vec2rotate=void 0,t.vec2rotate=function(e,t,r){var n=t[0],o=t[1];e[0]=n*Math.cos(r)+o*Math.sin(r),e[1]=-n*Math.sin(r)+o*Math.cos(r)}},3883:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vec2set=void 0,t.vec2set=function(e,t,r){e[0]=t,e[1]=r}},6666:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vec3copy=void 0,t.vec3copy=function(e,t){e[0]=t[0],e[1]=t[1],e[2]=t[2]}},8164:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vec3create=void 0,t.vec3create=function(){return[0,0,0]}},7648:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vec3dist=void 0,t.vec3dist=function(e,t){var r=t[0]-e[0],n=t[1]-e[1],o=t[2]-e[2];return Math.sqrt(r*r+n*n+o*o)}},3440:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vec3equals=void 0,t.vec3equals=function(e,t,r){return void 0===r&&(r=1e-6),Math.abs(e[0]-t[0])<=r&&Math.abs(e[1]-t[1])<=r&&Math.abs(e[2]-t[2])<=r}},8876:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vec3exactEquals=void 0,t.vec3exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}},2083:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vec3set=t.vec3normalize=t.vec3max=t.vec3min=t.vec3lerp=t.vec3exactEquals=t.vec3equals=t.vec3dist=t.vec3create=t.vec3copy=void 0;var n=r(6666);Object.defineProperty(t,"vec3copy",{enumerable:!0,get:function(){return n.vec3copy}});var o=r(8164);Object.defineProperty(t,"vec3create",{enumerable:!0,get:function(){return o.vec3create}});var i=r(7648);Object.defineProperty(t,"vec3dist",{enumerable:!0,get:function(){return i.vec3dist}});var a=r(3440);Object.defineProperty(t,"vec3equals",{enumerable:!0,get:function(){return a.vec3equals}});var s=r(8876);Object.defineProperty(t,"vec3exactEquals",{enumerable:!0,get:function(){return s.vec3exactEquals}});var c=r(4034);Object.defineProperty(t,"vec3lerp",{enumerable:!0,get:function(){return c.vec3lerp}});var u=r(5348);Object.defineProperty(t,"vec3min",{enumerable:!0,get:function(){return u.vec3min}});var d=r(8430);Object.defineProperty(t,"vec3max",{enumerable:!0,get:function(){return d.vec3max}});var l=r(342);Object.defineProperty(t,"vec3normalize",{enumerable:!0,get:function(){return l.vec3normalize}});var f=r(1245);Object.defineProperty(t,"vec3set",{enumerable:!0,get:function(){return f.vec3set}})},4034:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vec3lerp=void 0,t.vec3lerp=function(e,t,r,n){var o=t[0],i=t[1],a=t[2];e[0]=o+n*(r[0]-o),e[1]=i+n*(r[1]-i),e[2]=a+n*(r[2]-a)}},8430:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vec3max=void 0,t.vec3max=function(e,t,r){e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2])}},5348:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vec3min=void 0,t.vec3min=function(e,t,r){e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2])}},342:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vec3normalize=void 0,t.vec3normalize=function(e,t){var r=t[0],n=t[1],o=t[2],i=r*r+n*n+o*o;i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i)}},1245:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vec3set=void 0,t.vec3set=function(e,t,r,n){e[0]=t,e[1]=r,e[2]=n}},331:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vec4copy=void 0,t.vec4copy=function(e,t){e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]}},59:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vec4create=void 0,t.vec4create=function(){return[0,0,0,0]}},8025:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vec4dist=void 0,t.vec4dist=function(e,t){var r=t[0]-e[0],n=t[1]-e[1],o=t[2]-e[2],i=t[3]-e[3];return Math.sqrt(r*r+n*n+o*o+i*i)}},6106:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vec4equals=void 0,t.vec4equals=function(e,t,r){return void 0===r&&(r=1e-6),Math.abs(e[0]-t[0])<=r&&Math.abs(e[1]-t[1])<=r&&Math.abs(e[2]-t[2])<=r&&Math.abs(e[3]-t[3])<=r}},7122:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vec4exactEquals=void 0,t.vec4exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}},8123:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vec4set=t.vec4normalize=t.vec4max=t.vec4min=t.vec4lerp=t.vec4exactEquals=t.vec4equals=t.vec4dist=t.vec4create=t.vec4copy=void 0;var n=r(331);Object.defineProperty(t,"vec4copy",{enumerable:!0,get:function(){return n.vec4copy}});var o=r(59);Object.defineProperty(t,"vec4create",{enumerable:!0,get:function(){return o.vec4create}});var i=r(8025);Object.defineProperty(t,"vec4dist",{enumerable:!0,get:function(){return i.vec4dist}});var a=r(6106);Object.defineProperty(t,"vec4equals",{enumerable:!0,get:function(){return a.vec4equals}});var s=r(7122);Object.defineProperty(t,"vec4exactEquals",{enumerable:!0,get:function(){return s.vec4exactEquals}});var c=r(356);Object.defineProperty(t,"vec4lerp",{enumerable:!0,get:function(){return c.vec4lerp}});var u=r(2071);Object.defineProperty(t,"vec4min",{enumerable:!0,get:function(){return u.vec4min}});var d=r(868);Object.defineProperty(t,"vec4max",{enumerable:!0,get:function(){return d.vec4max}});var l=r(8883);Object.defineProperty(t,"vec4normalize",{enumerable:!0,get:function(){return l.vec4normalize}});var f=r(7040);Object.defineProperty(t,"vec4set",{enumerable:!0,get:function(){return f.vec4set}})},356:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vec4lerp=void 0,t.vec4lerp=function(e,t,r,n){var o=t[0],i=t[1],a=t[2],s=t[3];e[0]=o+n*(r[0]-o),e[1]=i+n*(r[1]-i),e[2]=a+n*(r[2]-a),e[3]=s+n*(r[3]-s)}},868:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vec4max=void 0,t.vec4max=function(e,t,r){e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3])}},2071:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vec4min=void 0,t.vec4min=function(e,t,r){e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3])}},8883:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vec4normalize=void 0,t.vec4normalize=function(e,t){var r=t[0],n=t[1],o=t[2],i=t[3],a=r*r+n*n+o*o+i*i;a>0&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a)}},7040:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vec4set=void 0,t.vec4set=function(e,t,r,n,o){e[0]=t,e[1]=r,e[2]=n,e[3]=o}},691:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vec2dist=void 0,t.vec2dist=function(e,t){var r=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(r*r+n*n)}},457:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vec2lerp=void 0,t.vec2lerp=function(e,t,r,n){var o=t[0],i=t[1];e[0]=o+n*(r[0]-o),e[1]=i+n*(r[1]-i)}},2582:function(e){e.exports=function(){"use strict";function e(e,n,o,i,a){!function e(r,n,o,i,a){for(;i>o;){if(i-o>600){var s=i-o+1,c=n-o+1,u=Math.log(s),d=.5*Math.exp(2*u/3),l=.5*Math.sqrt(u*d*(s-d)/s)*(c-s/2<0?-1:1);e(r,n,Math.max(o,Math.floor(n-c*d/s+l)),Math.min(i,Math.floor(n+(s-c)*d/s+l)),a)}var f=r[n],p=o,v=i;for(t(r,o,n),a(r[i],f)>0&&t(r,o,i);p<v;){for(t(r,p,v),p++,v--;a(r[p],f)<0;)p++;for(;a(r[v],f)>0;)v--}0===a(r[o],f)?t(r,o,v):t(r,++v,i),v<=n&&(o=v+1),n<=v&&(i=v-1)}}(e,n,o||0,i||e.length-1,a||r)}function t(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function r(e,t){return e<t?-1:e>t?1:0}var n=function(e){void 0===e&&(e=9),this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function o(e,t,r){if(!r)return t.indexOf(e);for(var n=0;n<t.length;n++)if(r(e,t[n]))return n;return-1}function i(e,t){a(e,0,e.children.length,t,e)}function a(e,t,r,n,o){o||(o=v(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(var i=t;i<r;i++){var a=e.children[i];s(o,e.leaf?n(a):a)}return o}function s(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function c(e,t){return e.minX-t.minX}function u(e,t){return e.minY-t.minY}function d(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function l(e){return e.maxX-e.minX+(e.maxY-e.minY)}function f(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function p(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function v(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function h(t,r,n,o,i){for(var a=[r,n];a.length;)if(!((n=a.pop())-(r=a.pop())<=o)){var s=r+Math.ceil((n-r)/o/2)*o;e(t,s,r,n,i),a.push(r,s,s,n)}}return n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(e){var t=this.data,r=[];if(!p(e,t))return r;for(var n=this.toBBox,o=[];t;){for(var i=0;i<t.children.length;i++){var a=t.children[i],s=t.leaf?n(a):a;p(e,s)&&(t.leaf?r.push(a):f(e,s)?this._all(a,r):o.push(a))}t=o.pop()}return r},n.prototype.collides=function(e){var t=this.data;if(!p(e,t))return!1;for(var r=[];t;){for(var n=0;n<t.children.length;n++){var o=t.children[n],i=t.leaf?this.toBBox(o):o;if(p(e,i)){if(t.leaf||f(e,i))return!0;r.push(o)}}t=r.pop()}return!1},n.prototype.load=function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0;t<e.length;t++)this.insert(e[t]);return this}var r=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},n.prototype.insert=function(e){return e&&this._insert(e,this.data.height-1),this},n.prototype.clear=function(){return this.data=v([]),this},n.prototype.remove=function(e,t){if(!e)return this;for(var r,n,i,a=this.data,s=this.toBBox(e),c=[],u=[];a||c.length;){if(a||(a=c.pop(),n=c[c.length-1],r=u.pop(),i=!0),a.leaf){var d=o(e,a.children,t);if(-1!==d)return a.children.splice(d,1),c.push(a),this._condense(c),this}i||a.leaf||!f(a,s)?n?(r++,a=n.children[r],i=!1):a=null:(c.push(a),u.push(r),r=0,n=a,a=a.children[0])}return this},n.prototype.toBBox=function(e){return e},n.prototype.compareMinX=function(e,t){return e.minX-t.minX},n.prototype.compareMinY=function(e,t){return e.minY-t.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(e){return this.data=e,this},n.prototype._all=function(e,t){for(var r=[];e;)e.leaf?t.push.apply(t,e.children):r.push.apply(r,e.children),e=r.pop();return t},n.prototype._build=function(e,t,r,n){var o,a=r-t+1,s=this._maxEntries;if(a<=s)return i(o=v(e.slice(t,r+1)),this.toBBox),o;n||(n=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,n-1))),(o=v([])).leaf=!1,o.height=n;var c=Math.ceil(a/s),u=c*Math.ceil(Math.sqrt(s));h(e,t,r,u,this.compareMinX);for(var d=t;d<=r;d+=u){var l=Math.min(d+u-1,r);h(e,d,l,c,this.compareMinY);for(var f=d;f<=l;f+=c){var p=Math.min(f+c-1,l);o.children.push(this._build(e,f,p,n-1))}}return i(o,this.toBBox),o},n.prototype._chooseSubtree=function(e,t,r,n){for(;n.push(t),!t.leaf&&n.length-1!==r;){for(var o=1/0,i=1/0,a=void 0,s=0;s<t.children.length;s++){var c=t.children[s],u=d(c),l=(f=e,p=c,(Math.max(p.maxX,f.maxX)-Math.min(p.minX,f.minX))*(Math.max(p.maxY,f.maxY)-Math.min(p.minY,f.minY))-u);l<i?(i=l,o=u<o?u:o,a=c):l===i&&u<o&&(o=u,a=c)}t=a||t.children[0]}var f,p;return t},n.prototype._insert=function(e,t,r){var n=r?e:this.toBBox(e),o=[],i=this._chooseSubtree(n,this.data,t,o);for(i.children.push(e),s(i,n);t>=0&&o[t].children.length>this._maxEntries;)this._split(o,t),t--;this._adjustParentBBoxes(n,o,t)},n.prototype._split=function(e,t){var r=e[t],n=r.children.length,o=this._minEntries;this._chooseSplitAxis(r,o,n);var a=this._chooseSplitIndex(r,o,n),s=v(r.children.splice(a,r.children.length-a));s.height=r.height,s.leaf=r.leaf,i(r,this.toBBox),i(s,this.toBBox),t?e[t-1].children.push(s):this._splitRoot(r,s)},n.prototype._splitRoot=function(e,t){this.data=v([e,t]),this.data.height=e.height+1,this.data.leaf=!1,i(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(e,t,r){for(var n,o,i,s,c,u,l,f=1/0,p=1/0,v=t;v<=r-t;v++){var h=a(e,0,v,this.toBBox),m=a(e,v,r,this.toBBox),g=(o=h,i=m,void 0,void 0,void 0,void 0,s=Math.max(o.minX,i.minX),c=Math.max(o.minY,i.minY),u=Math.min(o.maxX,i.maxX),l=Math.min(o.maxY,i.maxY),Math.max(0,u-s)*Math.max(0,l-c)),y=d(h)+d(m);g<f?(f=g,n=v,p=y<p?y:p):g===f&&y<p&&(p=y,n=v)}return n||r-t},n.prototype._chooseSplitAxis=function(e,t,r){var n=e.leaf?this.compareMinX:c,o=e.leaf?this.compareMinY:u;this._allDistMargin(e,t,r,n)<this._allDistMargin(e,t,r,o)&&e.children.sort(n)},n.prototype._allDistMargin=function(e,t,r,n){e.children.sort(n);for(var o=this.toBBox,i=a(e,0,t,o),c=a(e,r-t,r,o),u=l(i)+l(c),d=t;d<r-t;d++){var f=e.children[d];s(i,e.leaf?o(f):f),u+=l(i)}for(var p=r-t-1;p>=t;p--){var v=e.children[p];s(c,e.leaf?o(v):v),u+=l(c)}return u},n.prototype._adjustParentBBoxes=function(e,t,r){for(var n=r;n>=0;n--)s(t[n],e)},n.prototype._condense=function(e){for(var t=e.length-1,r=void 0;t>=0;t--)0===e[t].children.length?t>0?(r=e[t-1].children).splice(r.indexOf(e[t]),1):this.clear():i(e[t],this.toBBox)},n}()},4868:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.startDistanceExample=void 0;const n=r(7723),o=r(4432);t.startDistanceExample=function(){const e=new mapgl.Map("map",{key:"042b5b75-f847-4f2a-b695-b5f58adc9dfd",center:[82.91395527317273,55.02479004260136],zoom:18});window.addEventListener("resize",(()=>e.invalidateSize())),e.on("click",(e=>console.log(e.lngLat))),fetch("./data.json").then((e=>e.json())).then((function(t){new mapgl.Marker(e,{coordinates:[82.91395527317273,55.02479004260136],icon:(0,n.circleIcon)("#00ff00aa",15),size:[15,15],label:{text:"Stop",fontSize:12}});const r=new o.Roads(t),i=[[82.91605265372532,55.02425812836841],[82.91395527317273,55.02479004260136],[82.91562046805761,55.02546767752546],[82.91776869529488,55.02503778130044]].map((e=>r.findNearestVertex((0,n.mapPointFromLngLat)(e)))).filter((e=>void 0!==e)),a=[[82.91234338317402,55.02391800400252],[82.91395527317273,55.02479004260136],[82.9122339936905,55.02515278410664],[82.91020612086614,55.0243424630069]].map((e=>r.findNearestVertex((0,n.mapPointFromLngLat)(e)))).filter((e=>void 0!==e));let s=0;const c=(0,n.circleIcon)("#0000ffaa",5),u=(0,n.circleIcon)("#ff0000aa",5);function d(t,o,i){let a=0;const c=r.createPoint({speed:i,position:t[a],keepingDistance:1e3}),u=new mapgl.Marker(e,{coordinates:(0,n.mapPointToLngLat)(c.getCoords()),icon:o,size:[10,10],label:{text:""+s++,fontSize:6},zIndex:1});function d(){setTimeout((()=>{a=(a+1)%t.length,c.moveTo(t[a])}),1===a?300:0)}u.on("click",(()=>{console.log(c)})),c.on("routefinish",d),d(),c.on("move",(()=>{u.setCoordinates((0,n.mapPointToLngLat)(c.getCoords()))}))}for(let e=0;e<20;e++)d(i,c,8),d(a,u,5)}))}},613:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.startSimpleExample=void 0;const n=r(7723),o=r(4432);t.startSimpleExample=function(){const e=[82.92494,55.0294],t=new mapgl.Map("map",{key:"042b5b75-f847-4f2a-b695-b5f58adc9dfd",center:e,zoom:14});function r(e,t){const r=2*Math.PI*Math.random(),n=Math.random()*t;return[e[0]+Math.cos(r)*n,e[1]+Math.sin(r)*n]}window.addEventListener("resize",(()=>t.invalidateSize())),fetch("./data.json").then((e=>e.json())).then((function(i){const a=new o.Roads(i),s=[],c=(0,n.mapPointFromLngLat)(e),u=3e5;for(let e=0;e<5;e++){const i=a.findNearestVertex(r(c,u));if(i){const d=a.createPoint({position:i,speed:50}),l=()=>{const e=a.findNearestVertex(r(c,u));e&&d.moveTo(e)};d.on("routefinish",l),l();const f=new mapgl.Marker(t,{coordinates:(0,n.mapPointToLngLat)(d.getCoords()),icon:"./icon.svg",size:[16,16],label:{text:`${e}`,offset:[0,0],fontSize:10},zIndex:1});let p;const v=()=>{p&&p.destroy(),p=new mapgl.Polyline(t,{coordinates:(0,o.getRouteGeometry)(d.getRoute()).map((e=>(0,n.mapPointToLngLat)(e))),color:"#ff000077",width:3,zIndex:0})};d.on("move",(()=>{const e=(0,n.mapPointToLngLat)(d.getCoords());f.setCoordinates(e),v()})),s.push({point:d,marker:f})}}}))}},6009:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prepareGraph=void 0;const n=r(691);r(4432),r(4087);const o=r(1200);function i(e){let t=0;for(let r=1;r<e.length;r++)t+=(0,n.vec2dist)(e[r-1],e[r]);return t}t.prepareGraph=function(e){var t;(0,o.unpackGraph)(e);const r=e.vertices.map(((e,t)=>{var r;return{index:t,type:"road",coords:e.coords,edges:[],pathFind:{f:0,g:0,id:-1,routeLength:0,parent:void 0},userData:null!==(r=e.userData)&&void 0!==r?r:{}}})),n=e.edges.map(((e,t)=>{var n;return{index:t,type:"road",a:r[e.a],b:r[e.b],geometry:e.geometry,oneWay:e.oneWay,length:i(e.geometry),userData:null!==(n=e.userData)&&void 0!==n?n:{},points:new Set,forwardLastPoint:void 0,reverseLastPoint:void 0}}));for(let t=0;t<r.length;t++){const o=r[t],i=e.vertices[t];o.edges=i.edges.map((e=>n[e]))}return{center:e.center,min:e.min,max:e.max,vertices:r,edges:n,userData:null!==(t=e.userData)&&void 0!==t?t:{}}}},4087:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(4432)},1200:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unpackGraph=void 0,r(4087);const n=100;t.unpackGraph=function(e){2!==e.formatVersion&&console.warn(`Supported format version is only 2, but data graph format version is ${e.formatVersion}`);let t=0,r=0;function o(e){t=e[0]=e[0]+t,r=e[1]=e[1]+r}let i=0;function a(e){return i=e+i,i}e.vertices.forEach((t=>{o(t.coords),t.coords[0]=t.coords[0]*n,t.coords[1]=t.coords[1]*n,t.coords[0]=t.coords[0]+e.center[0],t.coords[1]=t.coords[1]+e.center[1],t.edges=t.edges.map(a)})),e.edges.forEach((t=>{t.a=a(t.a),t.b=a(t.b),t.oneWay=Boolean(t.oneWay),void 0===t.geometry?t.geometry=[e.vertices[t.a].coords,e.vertices[t.b].coords]:t.geometry.forEach((t=>{o(t),t[0]=t[0]*n,t[1]=t[1]*n,t[0]=t[0]+e.center[0],t[1]=t[1]+e.center[1]}))}))}},1460:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAtFromSegment=t.getSegment=t.findEdgeFromVertexToVertex=void 0;const n=r(9753),o=r(691),i=r(457);r(4087),t.findEdgeFromVertexToVertex=function(e,t){for(const r of e.edges){if(r.a===e&&r.b===t)return{edge:r,forward:!0};if(r.a===t&&r.b===e)return{edge:r,forward:!1}}},t.getSegment=function(e,t){const{length:r,geometry:a}=e,s=r*t;let c=0;for(let e=0;e<a.length-1;e++){const t=(0,o.vec2dist)(a[e],a[e+1]);if(c+t>=s){const r=[0,0],o=t>0?(0,n.clamp)((s-c)/t,0,1):0;return(0,i.vec2lerp)(r,a[e],a[e+1],o),{segmentIndex:e,positionAtSegment:o,coords:r}}c+=t}return{segmentIndex:0,positionAtSegment:0,coords:[0,0]}},t.getAtFromSegment=function(e,t,r){const{length:n,geometry:i}=e;let a=0;for(let e=0;e<r;e++)a+=(0,o.vec2dist)(i[e],i[e+1]);return a+=(0,o.vec2dist)(i[r],i[r+1])*t,a/n}},5502:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VertexFinder=void 0;const n=r(655),o=r(1380),i=r(691),a=(0,n.__importDefault)(r(2582));r(4087);const s=r(1460);function c(e,t){return{minX:e[0]-t,minY:e[1]-t,maxX:e[0]+t,maxY:e[1]+t}}t.VertexFinder=class{constructor(e){this.graph=e,this.tree=new a.default,this.tree.load(this.graph.vertices.map((e=>function(e,t){return{minX:e[0],minY:e[1],maxX:e[0],maxY:e[1],vertex:t}}(e.coords,e))))}findVertices(e,t){return this.tree.search(c(e,t)).map((e=>e.vertex))}findNearest(e,t=1/0){const r=this.tree.search(c(e,131072)).map((e=>e.vertex)),n=new Set;for(const e of r)for(const t of e.edges)n.add(t.index);let a;if(n.forEach((r=>{const n=this.graph.edges[r];for(let r=0;r<n.geometry.length-1;r++){const s=(0,o.nearestPointOnSegment)(e,n.geometry[r],n.geometry[r+1]),c=(0,i.vec2dist)(e,s.point);c<t&&(t=c,a={edge:n,segmentIndex:r,positionAtSegment:s.t,coords:s.point})}})),a)return{edge:a.edge,segmentIndex:a.segmentIndex,positionAtSegment:a.positionAtSegment,coords:a.coords,at:(0,s.getAtFromSegment)(a.edge,a.positionAtSegment,a.segmentIndex)}}}},4432:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PathfindHeuristicFunction=t.breadthFirstTraversalFromMidway=t.pathfindFromMidway=t.getRouteGeometry=t.Route=t.PointMoveEvent=t.PointEvents=t.Point=t.PointPosition=t.PointInitialData=t.DataGraphVertex=t.DataGraphEdge=t.DataGraph=t.ClientGraphVertex=t.ClientGraphEdge=t.ClientGraph=t.RoadsOptions=t.RoadsEvents=t.Roads=void 0;var n=r(6074);Object.defineProperty(t,"Roads",{enumerable:!0,get:function(){return n.Roads}}),Object.defineProperty(t,"RoadsEvents",{enumerable:!0,get:function(){return n.RoadsEvents}}),Object.defineProperty(t,"RoadsOptions",{enumerable:!0,get:function(){return n.RoadsOptions}});var o=r(4087);Object.defineProperty(t,"ClientGraph",{enumerable:!0,get:function(){return o.ClientGraph}}),Object.defineProperty(t,"ClientGraphEdge",{enumerable:!0,get:function(){return o.ClientGraphEdge}}),Object.defineProperty(t,"ClientGraphVertex",{enumerable:!0,get:function(){return o.ClientGraphVertex}}),Object.defineProperty(t,"DataGraph",{enumerable:!0,get:function(){return o.DataGraph}}),Object.defineProperty(t,"DataGraphEdge",{enumerable:!0,get:function(){return o.DataGraphEdge}}),Object.defineProperty(t,"DataGraphVertex",{enumerable:!0,get:function(){return o.DataGraphVertex}});var i=r(9294);Object.defineProperty(t,"PointInitialData",{enumerable:!0,get:function(){return i.PointInitialData}}),Object.defineProperty(t,"PointPosition",{enumerable:!0,get:function(){return i.PointPosition}}),Object.defineProperty(t,"Point",{enumerable:!0,get:function(){return i.Point}}),Object.defineProperty(t,"PointEvents",{enumerable:!0,get:function(){return i.PointEvents}}),Object.defineProperty(t,"PointMoveEvent",{enumerable:!0,get:function(){return i.PointMoveEvent}});var a=r(7558);Object.defineProperty(t,"Route",{enumerable:!0,get:function(){return a.Route}}),Object.defineProperty(t,"getRouteGeometry",{enumerable:!0,get:function(){return a.getRouteGeometry}});var s=r(4603);Object.defineProperty(t,"pathfindFromMidway",{enumerable:!0,get:function(){return s.pathfindFromMidway}}),Object.defineProperty(t,"breadthFirstTraversalFromMidway",{enumerable:!0,get:function(){return s.breadthFirstTraversalFromMidway}}),Object.defineProperty(t,"PathfindHeuristicFunction",{enumerable:!0,get:function(){return s.PathfindHeuristicFunction}})},225:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FlatQueue=void 0,t.FlatQueue=class{constructor(){this.ids=[],this.values=[],this.length=0}clear(){this.length=0}push(e,t){let r=this.length++;for(this.ids[r]=e,this.values[r]=t;r>0;){const e=r-1>>1,n=this.values[e];if(t>=n)break;this.ids[r]=this.ids[e],this.values[r]=n,r=e}this.ids[r]=e,this.values[r]=t}pop(){if(0===this.length)return;const e=this.ids[0];if(this.length--,this.length>0){const e=this.ids[0]=this.ids[this.length],t=this.values[0]=this.values[this.length],r=this.length>>1;let n=0;for(;n<r;){let e=1+(n<<1);const r=e+1;let o=this.ids[e],i=this.values[e];const a=this.values[r];if(r<this.length&&a<i&&(e=r,o=this.ids[r],i=a),i>=t)break;this.ids[n]=o,this.values[n]=i,n=e}this.ids[n]=e,this.values[n]=t}return e}peek(){return this.ids[0]}peekValue(){return this.values[0]}}},4603:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.breadthFirstTraversalFromMidway=t.pathfindFromMidway=void 0,r(4087);const n=r(1460);r(9294),r(7558);const o=r(225),i=r(4842),a=new o.FlatQueue;let s=0;t.pathfindFromMidway=function(e,t,r){if(e.edge===t.edge)return{fromAt:e.at,toAt:t.at,edges:[{edge:e.edge,forward:e.at<t.at}]};let o,c;if(0===e.at)o=e.edge.a;else if(1===e.at)o=e.edge.b;else{const{vertex:t,leftEdge:r,rightEdge:n}=(0,i.createArtificialVertexAndEdges)(e);t.edges.push(r,n),o=t}if(0===t.at)c=t.edge.a;else if(1===t.at)c=t.edge.b;else{const{vertex:e,leftEdge:r,rightEdge:n}=(0,i.createArtificialVertexAndEdges)(t);e.edges.push(r,n),c=e,r.a.pathFind.artificialEdge=r,n.b.pathFind.artificialEdge=n}r||(r=(e,t,r)=>Math.abs(r.coords[0]-c.coords[0])+Math.abs(r.coords[1]-c.coords[1]));let u=function(e,t,r){const n=s++;a.clear(),e.pathFind.f=0,e.pathFind.g=0,e.pathFind.id=n,e.pathFind.parent=void 0,a.push(e,0);let o=a.pop();for(;o&&o!==t;){for(const e of(0,i.getVertexEdges)(o)){if(e.oneWay&&e.a!==o)continue;const t=(0,i.anotherEdgeVertex)(e,o);t.pathFind.id!==n&&(t.pathFind.g=o.pathFind.g+e.length,t.pathFind.f=t.pathFind.g+r(o,e,t),t.pathFind.parent=o,t.pathFind.id=n,a.push(t,t.pathFind.f))}o=a.pop()}if(o){const e=[];let t=o;for(;t;)e.push(t),t=t.pathFind.parent;return e.reverse(),e}}(o,c,r);if(!u)return;"artificial"===o.type&&(u[0]=(0,i.anotherEdgeVertex)(e.edge,u[1])),"artificial"===c.type&&(c.edges[0].a.pathFind.artificialEdge=void 0,c.edges[1].b.pathFind.artificialEdge=void 0,u[u.length-1]=(0,i.anotherEdgeVertex)(t.edge,u[u.length-2]));const d=[];for(let e=0;e<u.length-1;e++){const t=u[e],r=u[e+1],o=(0,n.findEdgeFromVertexToVertex)(t,r);if(!o)throw new Error(`Не найдена грань между вершинами: ${t.index} и ${r.index}`);d.push(o)}let l=e.at;const f=d[0];if(f.edge!==e.edge){if(0!==e.at&&1!==e.at)throw new Error(`Первая грань составленная из вершин поиска пути ${f.edge.index} не равна исходной ${e.edge.index}`);l=f.forward?0:1}let p=t.at;const v=d[d.length-1];if(v.edge!==t.edge){if(0!==t.at&&1!==t.at)throw new Error(`Последняя грань составленная из вершин поиска пути ${f.edge.index} не равна исходной ${t.edge.index}`);p=v.forward?0:1}return{fromAt:l,toAt:p,edges:d}},t.breadthFirstTraversalFromMidway=function(e,t){let r;if(0===e.at)r=e.edge.a;else if(1===e.at)r=e.edge.b;else{const{vertex:t,leftEdge:n,rightEdge:o}=(0,i.createArtificialVertexAndEdges)(e);t.edges.push(n,o),r=t}const c=function(e,t){const r=s++;a.clear();const n=new o.FlatQueue;e.pathFind.f=0,e.pathFind.g=0,e.pathFind.routeLength=0,e.pathFind.id=r,e.pathFind.parent=void 0,a.push(e,0),n.push(e,0);let c=a.pop();for(;c;){for(const e of(0,i.getVertexEdges)(c)){const o=(0,i.anotherEdgeVertex)(e,c);if(o.pathFind.id===r)continue;const s=c.pathFind.routeLength+1,u=t(s,o,c,e);void 0!==u&&(o.pathFind.routeLength=s,o.pathFind.g=c.pathFind.g+u,o.pathFind.f=0,o.pathFind.parent=c,o.pathFind.id=r,a.push(o,o.pathFind.routeLength),n.push(o,-o.pathFind.g))}c=a.pop()}const u=[];let d=n.pop();for(;d;)u.push(d),d=d.pathFind.parent;return u.reverse(),u}(r,t);if(!c||c.length<2)return;"artificial"===r.type&&(c[0]=(0,i.anotherEdgeVertex)(e.edge,c[1]));const u=[];for(let e=0;e<c.length-1;e++){const t=c[e],r=c[e+1],o=(0,n.findEdgeFromVertexToVertex)(t,r);if(!o)throw new Error(`Не найдена грань между вершинами: ${t.index} и ${r.index}`);u.push(o)}let d=e.at;const l=u[0];if(l.edge!==e.edge){if(0!==e.at&&1!==e.at)throw new Error(`Первая грань составленная из вершин поиска пути ${l.edge.index} не равна исходной ${e.edge.index}`);d=l.forward?0:1}return{fromAt:d,edges:u,toAt:u[u.length-1].forward?1:0}}},4842:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.anotherEdgeVertex=t.getVertexEdges=t.createArtificialVertexAndEdges=void 0,r(4087);const n=r(1460);r(9294),t.createArtificialVertexAndEdges=function(e){const{segmentIndex:t,coords:r}=(0,n.getSegment)(e.edge,e.at),o={index:-1,coords:r,type:"artificial",pathFind:{f:0,g:0,routeLength:0,id:-1,parent:void 0},edges:[],userData:{}},{leftEdge:i,rightEdge:a}=function(e,t,r){const n={index:-1,type:"artificial",length:0,geometry:[],a:e.a,b:r,userData:{},oneWay:e.oneWay},o={index:-1,type:"artificial",length:0,geometry:[],a:r,b:e.b,userData:{},oneWay:e.oneWay};for(let i=0;i<e.geometry.length;i++)i<=t&&n.geometry.push(e.geometry[i]),i===t&&(n.geometry.push(r.coords),o.geometry.push(r.coords)),i>t&&o.geometry.push(e.geometry[i]);return{leftEdge:n,rightEdge:o}}(e.edge,t,o);return{vertex:o,leftEdge:i,rightEdge:a}},t.getVertexEdges=function(e){return e.pathFind.artificialEdge?[e.pathFind.artificialEdge,...e.edges]:e.edges},t.anotherEdgeVertex=function(e,t){return e.a===t?e.b:e.a}},9294:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Point=void 0;const n=r(7134);r(4087);const o=r(1460),i=r(4603);r(7558);class a extends n.EventEmitter{constructor(e){super(),this.forward=!0,this.speed=e.speed,this.userData=e.userData,this.position={edge:e.position.edge,at:e.position.at},this.route={fromAt:this.position.at,toAt:this.position.at,edges:[{edge:this.position.edge,forward:!0}]},this.edgeIndexInRoute=0,this.keepingDistance=e.keepingDistance}moveTo(e){const t=(0,i.pathfindFromMidway)(this.position,e);t?this.setRoute(t):console.log("Not found route")}setRoute(e){const{fromAt:t,edges:r,toAt:n}=e;this.removeFromEdge(),this.route.fromAt=t,this.route.edges=r,this.route.toAt=n,this.edgeIndexInRoute=0,this.position.at=t,this.position.edge=r[0].edge,this.forward=r[0].forward,this.updatePointConnections()}getRoute(){return this.route}getSpeed(){return this.speed}getCoords(){const{coords:e}=(0,o.getSegment)(this.position.edge,this.position.at);return e}getPosition(){return this.position}isFinishedRoute(){return this.edgeIndexInRoute===this.route.edges.length-1&&this.position.at===this.route.toAt}updateMoving(e){const{position:t}=this,r=this.speed*e;if(!this.hasSpaceOnCurrentEdge())return;const n=t.edge.length?r/t.edge.length:1,o=this.edgeIndexInRoute===this.route.edges.length-1;if(o&&t.at===this.route.toAt)return;const i=t.edge;let a,s,c;if(a=o?this.route.toAt:this.forward?1:0,this.forward?(c=t.at+n,s=a-c):(c=t.at-n,s=c-a),s<=0){if(o)t.at=this.route.toAt;else{const e=this.route.edges[this.edgeIndexInRoute+1];if(!this.hasSpaceOnNextEdge(e))return;this.removeFromEdge(),e.forward?(this.next=e.edge.forwardLastPoint,e.edge.forwardLastPoint=this):(this.next=e.edge.reverseLastPoint,e.edge.reverseLastPoint=this),this.next&&(this.next.prev=this),this.edgeIndexInRoute++,t.at=e.forward?0:1,t.edge=e.edge,this.forward=e.forward}this.isFinishedRoute()&&this.emit("routefinish")}else t.at=c;this.emit("move",{edge:i,passedDistance:r})}hasSpaceOnCurrentEdge(){if(void 0===this.keepingDistance||!this.next)return!0;const e=this.next.position.at;return Math.abs(e-this.position.at)*this.position.edge.length>this.keepingDistance}hasSpaceOnNextEdge(e){if(void 0===this.keepingDistance)return!0;const t=e.forward?e.edge.forwardLastPoint:e.edge.reverseLastPoint;if(!t)return!0;const r=e.forward?0:1,n=t.position.at;return Math.abs(n-r)*e.edge.length>this.keepingDistance}updatePointConnections(){let e,t=this.forward?this.position.edge.forwardLastPoint:this.position.edge.reverseLastPoint;for(;void 0!==t&&(this.forward&&t.position.at<this.position.at||!this.forward&&t.position.at>this.position.at);)e=t,t=t.next;this.next=t,this.prev=e,this.next&&(this.next.prev=this),this.prev?this.prev.next=this:this.forward?this.position.edge.forwardLastPoint=this:this.position.edge.reverseLastPoint=this}removeFromEdge(){var e,t;(null===(e=this.prev)||void 0===e?void 0:e.next)===this&&(this.prev.next=this.next),(null===(t=this.next)||void 0===t?void 0:t.prev)===this&&(this.next.prev=this.prev);const r=this.position.edge;r.forwardLastPoint===this?r.forwardLastPoint=this.next:r.reverseLastPoint===this&&(r.reverseLastPoint=this.next)}}t.Point=a},6074:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Roads=void 0;const n=r(7134),o=r(8518),i=r(6009);r(4087);const a=r(1460),s=r(5502),c=r(9294),u={autoUpdate:!0};class d extends n.EventEmitter{constructor(e,t=u){super(),this.points=[],this.lastUpdateTime=Date.now(),this.updateLoop=()=>{requestAnimationFrame(this.updateLoop);const e=Date.now(),t=e-this.lastUpdateTime;this.update(t),this.lastUpdateTime=e},this.options=(0,o.applyDefaults)(t,u),this.graph=(0,i.prepareGraph)(e),this.vertexFinder=new s.VertexFinder(this.graph),this.options.autoUpdate&&requestAnimationFrame(this.updateLoop)}findNearestVertex(e,t=1/0){return this.vertexFinder.findNearest(e,t)}createPoint(e){const t=new c.Point(e);return this.points.push(t),t}removePoint(e){this.points=this.points.filter((t=>t!==e))}getPositionCoords(e){const{coords:t}=(0,a.getSegment)(e.edge,e.at);return t}update(e){this.points.forEach((t=>t.updateMoving(e))),this.emit("update")}}t.Roads=d},7558:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRouteGeometry=void 0,r(4087);const n=r(1460);function o(e,t,r){const o=[],i=(0,n.getSegment)(e,t),a=(0,n.getSegment)(e,r);if(o.push(i.coords),t<r)for(let t=i.segmentIndex+1;t<=a.segmentIndex;t++)o.push(e.geometry[t]);else for(let t=i.segmentIndex;t>a.segmentIndex;t--)o.push(e.geometry[t]);return o.push(a.coords),o}t.getRouteGeometry=function(e){const{fromAt:t,edges:r,toAt:n}=e,i=[],a=r[0],s=r[r.length-1];if(a.edge===s.edge)i.push(...o(a.edge,t,n));else{i.push(...o(a.edge,t,a.forward?1:0));for(let e=1;e<r.length-1;e++){const t=r[e];if(t.forward)for(let e=0;e<t.edge.geometry.length-1;e++)i.push(t.edge.geometry[e]);else for(let e=t.edge.geometry.length-1;e>0;e--)i.push(t.edge.geometry[e])}i.push(...o(s.edge,s.forward?0:1,n))}return i}},655:(e,t,r)=>{"use strict";r.r(t),r.d(t,{__extends:()=>o,__assign:()=>i,__rest:()=>a,__decorate:()=>s,__param:()=>c,__metadata:()=>u,__awaiter:()=>d,__generator:()=>l,__createBinding:()=>f,__exportStar:()=>p,__values:()=>v,__read:()=>h,__spread:()=>m,__spreadArrays:()=>g,__spreadArray:()=>y,__await:()=>b,__asyncGenerator:()=>P,__asyncDelegator:()=>_,__asyncValues:()=>x,__makeTemplateObject:()=>M,__importStar:()=>j,__importDefault:()=>w,__classPrivateFieldGet:()=>E,__classPrivateFieldSet:()=>F});var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)};function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var i=function(){return i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)};function a(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}function s(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a}function c(e,t){return function(r,n){t(r,n,e)}}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function d(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))}function l(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}var f=Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]};function p(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||f(t,e,r)}function v(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function h(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(h(arguments[t]));return e}function g(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)n[o]=i[a];return n}function y(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}function b(e){return this instanceof b?(this.v=e,this):new b(e)}function P(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(e,t||[]),i=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(e){o[e]&&(n[e]=function(t){return new Promise((function(r,n){i.push([e,t,r,n])>1||s(e,t)}))})}function s(e,t){try{(r=o[e](t)).value instanceof b?Promise.resolve(r.value.v).then(c,u):d(i[0][2],r)}catch(e){d(i[0][3],e)}var r}function c(e){s("next",e)}function u(e){s("throw",e)}function d(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}}function _(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,o){t[n]=e[n]?function(t){return(r=!r)?{value:b(e[n](t)),done:"return"===n}:o?o(t):t}:o}}function x(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=v(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,o){!function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}(n,o,(t=e[r](t)).done,t.value)}))}}}function M(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var O=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function j(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&f(t,e,r);return O(t,e),t}function w(e){return e&&e.__esModule?e:{default:e}}function E(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function F(e,t,r,n,o){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(e,r):o?o.value=r:t.set(e,r),r}}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";const e=r(4868),t=r(613);"distance"===location.search.slice(1)?(0,e.startDistanceExample)():(0,t.startSimpleExample)()})()})();